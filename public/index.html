<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sora Watermark Cleaner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="Remove Sora short-video watermark online. Upload a short video (â‰¤10s, â‰¤30MB). Fast, clean, privacy-friendly.">
  <meta name="api-base" content="">
  <link rel="icon" href="data:,">
  <style>
    .glass { background: rgba(255,255,255,0.75); backdrop-filter: saturate(180%) blur(10px); }
    .badge { border-radius: 10px; padding: 4px 10px; font-size: 12px; font-weight: 600; color: #fff; }
  </style>
</head>
<body class="min-h-screen bg-white text-gray-900">
  <!-- Header -->
  <header class="w-full">
    <div class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-6 w-6 rounded-md bg-black"></div>
        <span class="font-semibold text-base">Removesorawatermark</span>
      </div>
      <nav class="text-sm text-gray-600">
        <a href="#" class="hover:text-black mr-6">Home</a>
        <a href="#features" class="hover:text-black mr-6">Feature</a>
        <a href="#showcase" class="hover:text-black mr-6">Showcase</a>
        <a href="#qa" class="hover:text-black">FAQ</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6">
    <!-- Title + badges -->
    <section class="text-center mt-2 mb-6">
      <h1 class="text-2xl md:text-3xl font-semibold tracking-tight">Remove Sora Watermark</h1>
      <p class="mt-2 text-gray-700">Sora watermark remover with AI-Power, Free, Quickly and High-Quality</p>
      <div class="mt-4 flex flex-wrap items-center justify-center gap-3">
        <span class="badge" style="background:#ef4444">100% Automatic</span>
        <span class="badge" style="background:#10b981">100% Private</span>
        <span class="badge" style="background:#3b82f6">HD Quality</span>
        <span class="badge" style="background:#f59e0b">Preserves Audio</span>
        <span class="badge" style="background:#8b5cf6">Lightning Fast</span>
        <span class="badge" style="background:#0f766e">More Formats</span>
      </div>
    </section>

    <!-- Core two-column cards -->
    <section class="grid md:grid-cols-2 gap-8">
      <!-- Upload Card -->
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">Upload Video</h2>
        <div id="dropZone" class="mt-4 rounded-xl border-2 border-dashed border-gray-300 p-6 text-center cursor-pointer h-72">
          <input id="fileInput" type="file" accept="video/mp4,video/quicktime,video/*" class="hidden" />
          <div id="uploadEmpty" class="flex flex-col items-center">
            <div class="h-12 w-12 border-2 border-gray-400 rounded-lg flex items-center justify-center">
              <span class="text-2xl text-gray-600">â†‘</span>
            </div>
            <p class="mt-3 text-sm text-gray-700">Click to browse<br/>or drop the video here</p>
            <p class="mt-2 text-xs text-gray-500">MOV/MP4, â‰¤10s, â‰¤30MB</p>
          </div>
          <video id="uploadPreview" class="hidden w-full max-h-72 bg-black rounded-xl" controls muted playsinline></video>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <button id="btnSubmitUpload" class="px-5 py-2 rounded-xl bg-black text-white hover:bg-gray-800">Remove watermark</button>
          <button id="btnClearFile" class="px-4 py-2 rounded-xl border border-gray-200 hover:bg-gray-100">Clear</button>
          <span id="uploadInfo" class="text-xs text-gray-500">File â‰¤30MB & duration â‰¤10s</span>
        </div>
        <!-- Progress -->
        <div class="mt-4">
          <div class="w-full bg-gray-100 rounded-full h-2 overflow-hidden">
            <div id="progressBar" class="h-2 bg-black rounded-full" style="width:0%"></div>
          </div>
          <div class="mt-2 text-xs text-gray-600">
            <span id="progressText">Progress: 0%</span>
          </div>
        </div>
      </div>

      <!-- Result Card -->
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">Result</h2>
        <div class="mt-4 rounded-xl border-2 border-dashed border-gray-300 p-6 text-center h-72 relative">
          <video id="afterVideo" class="w-full h-full bg-black rounded-xl hidden object-contain" controls playsinline></video>
          <div id="resultEmpty" class="flex flex-col items-center">
            <div class="h-12 w-12 border-2 border-gray-400 rounded-lg flex items-center justify-center">
              <span class="text-2xl text-gray-600">ðŸ“º</span>
            </div>
            <p class="mt-3 text-sm text-gray-700">Upload a video to start</p>
          </div>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <a id="btnDownload" href="#" download="cleaned.mp4" class="px-5 py-2 rounded-xl bg-black text-white hover:bg-gray-800 pointer-events-none opacity-50">Download</a>
          <button id="btnToggleLogs" class="px-4 py-2 rounded-xl border border-gray-200 hover:bg-gray-100">Show details</button>
          <span id="apiHealthOut" class="text-xs text-gray-600">Backend: auto-detected</span>
        </div>
        <div id="logsBox" class="mt-2 text-xs text-gray-500 whitespace-pre-wrap max-h-36 overflow-y-auto hidden"></div>
      </div>
    </section>

    <!-- Features -->
    <section id="features" class="mt-12">
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">Why this watermark remover</h2>
        <ul class="mt-3 list-disc pl-6 text-gray-700">
          <li>Purpose-built for Sora short-video watermark patterns</li>
          <li>Fast processing via cloud inference</li>
          <li>Preserves visual quality while removing overlays</li>
          <li>Simple workflow: upload and one click to clean</li>
          <li>Temporary processing; we do not retain your converted videos</li>
        </ul>
      </div>
    </section>

    <!-- Showcase -->
    <section id="showcase" class="mt-12">
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">Before & After showcase</h2>
        <p class="mt-2 text-sm text-gray-600">Compare original and cleaned output side-by-side.</p>
        <div class="mt-4 grid md:grid-cols-2 gap-4">
          <video class="w-full h-64 bg-black rounded-xl" controls></video>
          <video class="w-full h-64 bg-black rounded-xl" controls></video>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="qa" class="mt-12">
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">FAQ</h2>
        <div class="mt-3 space-y-3">
          <details class="rounded-xl border border-gray-200 p-4">
            <summary class="font-medium cursor-pointer">Do you store my video?</summary>
            <p class="mt-2 text-sm text-gray-700">Converted videos are processed temporarily and not retained.</p>
          </details>
          <details class="rounded-xl border border-gray-200 p-4">
            <summary class="font-medium cursor-pointer">What formats are supported?</summary>
            <p class="mt-2 text-sm text-gray-700">MOV, MP4 and other common web-playable formats. Keep under 10 seconds and 30MB.</p>
          </details>
          <details class="rounded-xl border border-gray-200 p-4">
            <summary class="font-medium cursor-pointer">How long does processing take?</summary>
            <p class="mt-2 text-sm text-gray-700">Usually seconds to a few minutes depending on queue.</p>
          </details>
        </div>
      </div>
    </section>

    <!-- User Agreement -->
    <section id="agreement" class="mt-12">
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">User Agreement</h2>
        <ul class="mt-2 list-disc pl-6 text-gray-700 text-sm">
          <li>You must own or have permission to process the video content.</li>
          <li>Do not use this tool to infringe on creatorsâ€™ rights.</li>
          <li>Outputs are for personal use and evaluation; commercial use may require rights from the content owner.</li>
          <li>We may rate limit or refuse abusive usage.</li>
        </ul>
      </div>
    </section>

    <!-- Privacy Policy -->
    <section id="privacy" class="mt-12">
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">Privacy Policy</h2>
        <ul class="mt-2 list-disc pl-6 text-gray-700 text-sm">
          <li>Uploaded files are processed temporarily and not retained.</li>
          <li>No personal data is collected beyond technical logs required to operate the service.</li>
          <li>Third-party inference providers may process the video for the sole purpose of watermark removal.</li>
        </ul>
      </div>
    </section>

    <!-- Content Copyright -->
    <section id="copyright" class="mt-12">
      <div class="rounded-2xl border border-gray-200 p-6">
        <h2 class="text-base font-semibold">Content Copyright</h2>
        <p class="mt-2 text-sm text-gray-700">All content remains the property of their respective owners. This site is not affiliated with Sora or any of its authors.</p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="mt-12 mb-10">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 text-sm text-gray-600">
        <div>Â© 2025 Remove Sora Watermark</div>
        <div class="flex gap-6">
          <a href="#agreement" class="hover:text-black">User Agreement</a>
          <a href="#privacy" class="hover:text-black">Privacy Policy</a>
          <a href="#copyright" class="hover:text-black">Content Copyright</a>
        </div>
      </div>
      <p class="mt-4 text-xs text-gray-500">Disclaimer: This tool is for educational and research purposes only. Ensure you have rights to process the video. We do not claim ownership of any content and are not affiliated with Sora or its authors.</p>
    </footer>
  </main>

  <script>
    // API base
    const API_BASE = (document.querySelector('meta[name="api-base"]')?.content || '').trim();
    const apiUrl = (path) => (API_BASE ? API_BASE.replace(/\/$/, '') + path : path);

    const $ = (id) => document.getElementById(id);
    const dropZone = $("dropZone");
    const fileInput = $("fileInput");
    const uploadPreview = $("uploadPreview");
    const uploadEmpty = $("uploadEmpty");
    const btnSubmitUpload = $("btnSubmitUpload");
    const btnClearFile = $("btnClearFile");
    const progressBar = $("progressBar");
    const progressText = $("progressText");
    const afterVideo = $("afterVideo");
    const resultEmpty = $("resultEmpty");
    const btnDownload = $("btnDownload");
    const logsBox = $("logsBox");
    const apiHealthOut = $("apiHealthOut");
    const btnToggleLogs = $("btnToggleLogs");

    // Show backend base
    apiHealthOut.textContent = "Backend: " + (API_BASE || "(relative)");
    if (API_BASE.includes("dashboard.render.com")) {
      console.warn("API_BASE points to Render dashboard; use your onrender.com service URL.");
    }
    if (btnToggleLogs) {
      btnToggleLogs.addEventListener("click", () => {
        const hidden = logsBox.classList.contains("hidden");
        if (hidden) {
          logsBox.classList.remove("hidden");
          btnToggleLogs.textContent = "Hide details";
        } else {
          logsBox.classList.add("hidden");
          btnToggleLogs.textContent = "Show details";
        }
      });
    }

    // Drag & drop
    dropZone.addEventListener("click", () => fileInput.click());
    dropZone.addEventListener("dragover", (e) => { e.preventDefault(); dropZone.classList.add("bg-gray-50"); });
    dropZone.addEventListener("dragleave", () => dropZone.classList.remove("bg-gray-50"));
    dropZone.addEventListener("drop", (e) => {
      e.preventDefault();
      dropZone.classList.remove("bg-gray-50");
      const file = e.dataTransfer.files?.[0];
      if (file) handleFileSelected(file);
    });

    fileInput.addEventListener("change", () => {
      const file = fileInput.files?.[0];
      if (file) handleFileSelected(file);
    });

    function handleFileSelected(file) {
      const maxSize = 30 * 1024 * 1024;
      if (file.size > maxSize) {
        alert("File too large. Keep under 30MB.");
        fileInput.value = "";
        return;
      }
      const url = URL.createObjectURL(file);
      uploadEmpty.classList.add("hidden");
      uploadPreview.classList.remove("hidden");
      uploadPreview.src = url;
      uploadPreview.onloadedmetadata = () => {
        if (uploadPreview.duration && uploadPreview.duration > 10.5) {
          alert("Video too long. Keep under 10 seconds.");
          fileInput.value = "";
          uploadPreview.src = "";
          uploadPreview.classList.add("hidden");
          uploadEmpty.classList.remove("hidden");
        }
      };
    }

    btnClearFile.addEventListener("click", () => {
      fileInput.value = "";
      uploadPreview.src = "";
      uploadPreview.classList.add("hidden");
      uploadEmpty.classList.remove("hidden");
      resetResult();
      resetProgress();
    });

    // Progress simulation: increments to 90% while waiting, 100% on finish
    let progressTimer = null;
    function startProgress() {
      resetProgress();
      let p = 1;
      progressBar.style.width = p + "%";
      progressText.textContent = "Progress: " + p + "%";
      progressTimer = setInterval(() => {
        p = Math.min(90, p + 2);
        progressBar.style.width = p + "%";
        progressText.textContent = "Progress: " + p + "%";
      }, 600);
    }
    function finishProgress() {
      if (progressTimer) clearInterval(progressTimer);
      progressBar.style.width = "100%";
      progressText.textContent = "Progress: 100%";
    }
    function resetProgress() {
      if (progressTimer) clearInterval(progressTimer);
      progressBar.style.width = "0%";
      progressText.textContent = "Progress: 0%";
    }

    function setLoading(loading) {
      btnSubmitUpload.disabled = loading;
      btnSubmitUpload.textContent = loading ? "Processing..." : "Remove watermark";
    }

    btnSubmitUpload.addEventListener("click", async () => {
      const file = fileInput.files?.[0];
      if (!file) {
        alert("Please choose a video file.");
        return;
      }
      setLoading(true);
      startProgress();
      try {
        const form = new FormData();
        form.append("file", file, file.name);
        const resp = await fetch(apiUrl("/api/remove"), { method: "POST", body: form });
        const data = await resp.json();
        if (!resp.ok) throw new Error(data.error || "Request failed");

        const output = data.output;
        let afterUrl = null;
        if (Array.isArray(output)) afterUrl = output[output.length - 1];
        else if (typeof output === "string") afterUrl = output;
        else if (output && output.video) afterUrl = output.video;

        if (!afterUrl) throw new Error("No output URL returned.");
        showResult(afterUrl);
        logsBox.textContent = data.logs || "";
        finishProgress();
      } catch (e) {
        alert(e.message || "Error");
        logsBox.textContent = (e && e.message) ? e.message : String(e);
        resetProgress();
      } finally {
        setLoading(false);
      }
    });

    function showResult(url) {
      resultEmpty.classList.add("hidden");
      afterVideo.classList.remove("hidden");
      afterVideo.src = url;
      btnDownload.classList.remove("pointer-events-none", "opacity-50");
      btnDownload.href = url;
    }

    function resetResult() {
      afterVideo.src = "";
      afterVideo.classList.add("hidden");
      resultEmpty.classList.remove("hidden");
      btnDownload.classList.add("pointer-events-none", "opacity-50");
      btnDownload.href = "#";
      logsBox.textContent = "";
    }
  </script>
</body>
</html>